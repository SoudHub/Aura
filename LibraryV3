
local Orion = Instance.new("ScreenGui")

local FocusDrag = nil

Orion.Name = "OrionBlizPremium"

getgenv().gethui = function() return game.CoreGui end

		ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	})
	return Stroke
end)

CreateElement("Shadow", function()
	local Shadow = Create("ImageLabel", {
		Image = "rbxassetid://5554236805",
		ImageColor3 = Color3.fromRGB(0, 0, 0),
		ImageTransparency = 0.85,
		ScaleType = Enum.ScaleType.Slice,
		SliceCenter = Rect.new(23, 23, 277, 277),
		Size = UDim2.new(1, 12, 1, 12),
		Position = UDim2.new(0, -6, 0, -6),
		BackgroundTransparency = 1
	})
	return Shadow
end)

CreateElement("Glow", function(Color)
	local Glow = Create("ImageLabel", {
		Image = "rbxassetid://5028857084",
		ImageColor3 = Color or OrionLib.Themes[OrionLib.SelectedTheme].Accent,
		ImageTransparency = 0.7,
		ScaleType = Enum.ScaleType.Slice,
		SliceCenter = Rect.new(24, 24, 276, 276),
		Size = UDim2.new(1, 20, 1, 20),
		Position = UDim2.new(0, -10, 0, -10),
		BackgroundTransparency = 1
	})
	return Glow
end)

CreateElement("Gradient", function(Rotation, Colors)
	local Gradient = Create("UIGradient", {
		Rotation = Rotation or 90,
		Color = Colors or ColorSequence.new{
			ColorSequenceKeypoint.new(0.00, Color3.fromRGB(0, 150, 255)),
			ColorSequenceKeypoint.new(1.00, Color3.fromRGB(0, 200, 255))
		}
	})
	return Gradient
end)

CreateElement("Frame", function(Color, Transparency)
	local Frame = Create("Frame", {
		BackgroundColor3 = Color or Color3.fromRGB(255, 255, 255),
		BackgroundTransparency = Transparency or 0,
		BorderSizePixel = 0
	})
	return Frame
end)

CreateElement("RoundFrame", function(Color, Scale, Offset, Transparency)
	local Frame = Create("Frame", {
		BackgroundColor3 = Color or Color3.fromRGB(255, 255, 255),
		BackgroundTransparency = Transparency or 0,
		BorderSizePixel = 0
	}, {
		Create("UICorner", {
			CornerRadius = UDim.new(Scale or 0, Offset or 8)
		})
	})
	return Frame
end)

CreateElement("Button", function()
	local Button = Create("TextButton", {
		Text = "",
		AutoButtonColor = false,
		BackgroundTransparency = 1,
		BorderSizePixel = 0,
		TextSize = 14,
		Font = Enum.Font.GothamSemibold
	})
	return Button
end)

CreateElement("ScrollFrame", function(Color, Width)
	local ScrollFrame = Create("ScrollingFrame", {
		BackgroundTransparency = 1,
		MidImage = "rbxassetid://7445543667",
		BottomImage = "rbxassetid://7445543667",
		TopImage = "rbxassetid://7445543667",
		ScrollBarImageColor3 = Color or OrionLib.Themes[OrionLib.SelectedTheme].Stroke,
		BorderSizePixel = 0,
		ScrollBarThickness = Width or 4,
		CanvasSize = UDim2.new(0, 0, 0, 0),
		ScrollingDirection = Enum.ScrollingDirection.Y,
		VerticalScrollBarInset = Enum.ScrollBarInset.ScrollBar
	})
	return ScrollFrame
end)

CreateElement("Image", function(ImageID, Color, Transparency)
	local ImageNew = Create("ImageLabel", {
		Image = ImageID,
		BackgroundTransparency = 1,
		ImageColor3 = Color or Color3.fromRGB(255, 255, 255),
		ImageTransparency = Transparency or 0
	})

	if GetIcon(ImageID) ~= nil then
		ImageNew.Image = GetIcon(ImageID)
	end	

	return ImageNew
end)

CreateElement("Label", function(Text, TextSize, Transparency, Font)
	local Label = Create("TextLabel", {
		Text = Text or "",
		TextColor3 = OrionLib.Themes[OrionLib.SelectedTheme].Text,
		TextTransparency = Transparency or 0,
		TextSize = TextSize or 14,
		Font = Font or Enum.Font.GothamSemibold,
		RichText = true,
		BackgroundTransparency = 1,
		TextXAlignment = Enum.TextXAlignment.Left
	})
	return Label
end)
 ".txt"))
				OrionLib:MakeNotification({
					Name = "Configuration",
					Content = "Auto-loaded configuration for the game " .. game.GameId .. ".",
					Time = 5,
					Type = "Success"
				})
			end
		end)		
	end	
end

-- Janela principal estilizada
function OrionLib:MakeWindow(WindowConfig)
	local FirstTab = true
	local Minimized = false
	local Loaded = false
	local UIHidden = false

	WindowConfig = WindowConfig or {}
	WindowConfig.Name = WindowConfig.Name or "Orion Library"
	WindowConfig.ConfigFolder = WindowConfig.ConfigFolder or WindowConfig.Name
	WindowConfig.SaveConfig = WindowConfig.SaveConfig or false
	WindowConfig.HidePremium = WindowConfig.HidePremium or false
	if WindowConfig.IntroEnabled == nil then
		WindowConfig.IntroEnabled = true
	end
	WindowConfig.FreeMouse = WindowConfig.FreeMouse or false
	WindowConfig.KeyToOpenWindow = WindowConfig.KeyToOpenWindow or "RightShift"
	WindowConfig.IntroText = WindowConfig.IntroText or "Orion Library"
	WindowConfig.CloseCallback = WindowConfig.CloseCallback or function() end
	WindowConfig.ShowIcon = WindowConfig.ShowIcon or true
	WindowConfig.Icon = WindowConfig.Icon or "rbxassetid://7072706796"
	WindowConfig.IntroIcon = WindowConfig.IntroIcon or "rbxassetid://7072706796"
	WindowConfig.SearchBar = WindowConfig.SearchBar or nil
	OrionLib.Folder = WindowConfig.ConfigFolder
	OrionLib.SaveCfg = WindowConfig.SaveConfig

	if WindowConfig.SaveConfig then
		if not isfolder(WindowConfig.ConfigFolder) then
			makefolder(WindowConfig.ConfigFolder)
		end	
	end

	-- Container dos Tabs estilizado
	local TabHolder = AddThemeObject(SetChildren(SetProps(MakeElement("ScrollFrame", nil, 5),
	WindowConfig.SearchBar and {
		Size = UDim2.new(1, 0, 1, -100),
		Position = UDim2.new(0, 0, 0, 50)
	} or {
		Size = UDim2.new(1, 0, 1, -60)
	}), {
		MakeElement("List"),
		MakeElement("Padding", 10, 8, 8, 10)
	}), "Divider")

	AddConnection(TabHolder.UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"), function()
		if TabHolder and TabHolder.UIListLayout then
			TabHolder.CanvasSize = UDim2.new(0, 0, 0, TabHolder.UIListLayout.AbsoluteContentSize.Y + 20)
		end
	end)

	-- Botões de controle estilizados
	local CloseBtn = SetChildren(SetProps(MakeElement("Button"), {
		Size = UDim2.new(0.5, 0, 1, 0),
		Position = UDim2.new(0.5, 0, 0, 0),
		BackgroundTransparency = 1
	}), {
		AddThemeObject(SetProps(MakeElement("Image", "rbxassetid://7072725342"), {
			Position = UDim2.new(0, 10, 0, 8),
			Size = UDim2.new(0, 18, 0, 18)
		}), "Text")
	})

	local MinimizeBtn = SetChildren(SetProps(MakeElement("Button"), {
		Size = UDim2.new(0.5, 0, 1, 0),
		BackgroundTransparency = 1
	}), {
		AddThemeObject(SetProps(MakeElement("Image", "rbxassetid://7072719338"), {
			Position = UDim2.new(0, 10, 0, 8),
			Size = UDim2.new(0, 18, 0, 18),
			Name = "Ico"
		}), "Text")
	})

	local DragPoint = SetProps(MakeElement("Frame", nil, 1), {
		Size = UDim2.new(1, 0, 0, 50)
	})

	-- Painel lateral estilizado
	local WindowStuff = AddThemeObject(SetChildren(SetProps(MakeElement("RoundFrame", OrionLib.Themes[OrionLib.SelectedTheme].Second, 0.1, 15), {
		Size = UDim2.new(0, 180, 1, -60),
		Position = UDim2.new(0, 0, 0, 60),
		BackgroundTransparency = 0
	}), {
		MakeElement("Shadow"),
		MakeElement("Stroke", OrionLib.Themes[OrionLib.SelectedTheme].Stroke, 2, 0.2),
		TabHolder,
		SetChildren(SetProps(MakeElement("RoundFrame", OrionLib.Themes[OrionLib.SelectedTheme].Third, 0.1, 10), {
			Size = UDim2.new(1, -16, 0, 60),
			Position = UDim2.new(0, 8, 1, -68),
			BackgroundTransparency = 0
		}), {
			SetChildren(SetProps(MakeElement("Frame", nil, 1), {
				Size = UDim2.new(1, 0, 1, 0)
			}), {
				SetChildren(SetProps(MakeElement("RoundFrame", nil, 1, 20), {
					AnchorPoint = Vector2.new(0, 0.5),
					Size = UDim2.new(0, 36, 0, 36),
					Position = UDim2.new(0, 10, 0.5, 0)
				}), {
					SetProps(MakeElement("Image", "https://www.roblox.com/headshot-thumbnail/image?userId=".. LocalPlayer.UserId .."&width=420&height=420&format=png"), {
						Size = UDim2.new(1, 0, 1, 0)
					}),
					MakeElement("Stroke", OrionLib.Themes[OrionLib.SelectedTheme].Stroke, 2, 0.5),
					MakeElement("Corner", 1)
				}),
				AddThemeObject(SetProps(MakeElement("Label", LocalPlayer.DisplayName, 14), {
					Size = UDim2.new(1, -55, 0, 16),
					Position = UDim2.new(0, 55, 0, 12),
					Font = Enum.Font.GothamBold,
					ClipsDescendants = true
				}), "Text"),
				AddThemeObject(SetProps(MakeElement("Label", "@" .. LocalPlayer.Name, 12), {
					Size = UDim2.new(1, -55, 0, 14),
					Position = UDim2.new(0, 55, 1, -26),
					Font = Enum.Font.Gotham,
					TextTransparency = 0.4
				}), "TextDark")
			}),
			MakeElement("Stroke", OrionLib.Themes[OrionLib.SelectedTheme].Stroke, 1, 0.5)
		})
		MakeElement("Glow"),
		MakeElement("Shadow"),
		MakeElement("Stroke", OrionLib.Themes[OrionLib.SelectedTheme].Stroke, 2, 0.1),
		SetChildren(SetProps(MakeElement("RoundFrame", OrionLib.Themes[OrionLib.SelectedTheme].Third, 0.1, 12), {
			Size = UDim2.new(1, -16, 0, 50),
			Position = UDim2.new(0, 8, 0, 8),
			BackgroundTransparency = 0,
			Name = "TopBar"
		}), {
			SetChildren(SetProps(MakeElement("Frame", nil, 1), {
				Size = UDim2.new(1, 0, 1, 0)
			}), {
				AddThemeObject(SetProps(MakeElement("Label", WindowConfig.Name, 18), {
					Size = UDim2.new(1, -100, 1, 0),
					Position = UDim2.new(0, 15, 0, 0),
					Font = Enum.Font.GothamBlack,
					TextSize = 20
				}), "Text"),
				AddThemeObject(SetChildren(SetProps(MakeElement("RoundFrame", OrionLib.Themes[OrionLib.SelectedTheme].Second, 0.2, 8), {
					Size = UDim2.new(0, 80, 0, 34),
					Position = UDim2.new(1, -90, 0.5, 0),
					AnchorPoint = Vector2.new(0, 0.5),
					BackgroundTransparency = 0
				}), {
					MakeElement("Stroke", OrionLib.Themes[OrionLib.SelectedTheme].Stroke, 1, 0.3),
					AddThemeObject(SetProps(MakeElement("Frame", nil, 0.7), {
						Size = UDim2.new(0, 1, 1, -8),
						Position = UDim2.new(0.5, 0, 0, 4)
					}), "Stroke"),
					CloseBtn,
					MinimizeBtn
				}), "Main"),
			}),
			MakeElement("Stroke", OrionLib.Themes[OrionLib.SelectedTheme].Stroke, 1, 0.2)
		}),
		DragPoint,
		WindowStuff
				if ItemContainer.Name == "ItemContainer" then
					ItemContainer.Visible = false
				end    
			end  
			
			TweenService:Create(TabFrame.Background, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
				BackgroundColor3 = OrionLib.Themes[OrionLib.SelectedTheme].Main
			}):Play()
			TweenService:Create(TabFrame.Background.Ico, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
				ImageTransparency = 0,
				ImageColor3 = OrionLib.Themes[OrionLib.SelectedTheme].Accent
			}):Play()
			TweenService:Create(TabFrame.Background.Title, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
				TextTransparency = 0,
				TextColor3 = OrionLib.Themes[OrionLib.SelectedTheme].Accent
			}):Play()
			TabFrame.Background.Title.Font = Enum.Font.GothamBold
			Container.Visible = true   
		end)

		-- Funções dos elementos estilizadas
		local function GetElements(ItemParent)
			local ElementFunction = {}
			
			function ElementFunction:AddLabel(Text)
				local LabelFrame = AddThemeObject(SetChildren(SetProps(MakeElement("RoundFrame", OrionLib.Themes[OrionLib.SelectedTheme].Third, 0.1, 8), {
					Size = UDim2.new(1, 0, 0, 40),
					Parent = ItemParent
				}), {
					MakeElement("Stroke", OrionLib.Themes[OrionLib.SelectedTheme].Stroke, 1, 0.2),
					AddThemeObject(SetProps(MakeElement("Label", Text, 16), {
						Size = UDim2.new(1, -20, 1, 0),
						Position = UDim2.new(0, 15, 0, 0),
						Font = Enum.Font.GothamBold,
						Name = "Content"
					}), "Text"),
					SetChildren(SetProps(MakeElement("Frame", OrionLib.Themes[OrionLib.SelectedTheme].Accent, 0), {
						Size = UDim2.new(0, 4, 0.6, 0),
						Position = UDim2.new(0, 5, 0.2, 0),
						AnchorPoint = Vector2.new(0, 0.5)
					}), {
						MakeElement("Corner", 0, 2)
					})
				}), "Second")

				local LabelFunction = {}
				function LabelFunction:Set(ToChange)
					LabelFrame.Content.Text = ToChange
				end
				return LabelFunction
			end

			function ElementFunction:AddButton(ButtonConfig)
				ButtonConfig = ButtonConfig or {}
				ButtonConfig.Name = ButtonConfig.Name or "Button"
				ButtonConfig.Callback = ButtonConfig.Callback or function() end
				ButtonConfig.Icon = ButtonConfig.Icon or "rbxassetid://7072706796"
				ButtonConfig.Color = ButtonConfig.Color or OrionLib.Themes[OrionLib.SelectedTheme].Accent

				local Button = {}

				local Click = SetProps(MakeElement("Button"), {
					Size = UDim2.new(1, 0, 1, 0)
				})

				local ButtonFrame = AddThemeObject(SetChildren(SetProps(MakeElement("RoundFrame", OrionLib.Themes[OrionLib.SelectedTheme].Third, 0.1, 8), {
					Size = UDim2.new(1, 0, 0, 42),
					Parent = ItemParent
				}), {
					MakeElement("Stroke", OrionLib.Themes[OrionLib.SelectedTheme].Stroke, 1, 0.2),
					SetChildren(SetProps(MakeElement("Frame", nil, 1), {
						Size = UDim2.new(1, 0, 1, 0)
					}), {
						AddThemeObject(SetProps(MakeElement("Label", ButtonConfig.Name, 15), {
							Size = UDim2.new(1, -50, 1, 0),
							Position = UDim2.new(0, 15, 0, 0),
							Font = Enum.Font.GothamBold,
							Name = "Content"
						}), "Text"),
						SetProps(MakeElement("Image", ButtonConfig.Icon), {
							Size = UDim2.new(0, 22, 0, 22),
							Position = UDim2.new(1, -35, 0.5, 0),
							AnchorPoint = Vector2.new(0, 0.5),
							ImageColor3 = ButtonConfig.Color,
							Name = "Icon"
						})
					}),
					Click
				}), "Second")

				AddConnection(Click.MouseEnter, function()
					TweenService:Create(ButtonFrame, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
						BackgroundColor3 = Color3.fromRGB(
							math.floor(OrionLib.Themes[OrionLib.SelectedTheme].Third.R * 255 + 10),
							math.floor(OrionLib.Themes[OrionLib.SelectedTheme].Third.G * 255 + 10),
							math.floor(OrionLib.Themes[OrionLib.SelectedTheme].Third.B * 255 + 10)
						)
					}):Play()
					TweenService:Create(ButtonFrame.UIStroke, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
						Transparency = 0.1
					}):Play()
				end)

				AddConnection(Click.MouseLeave, function()
					TweenService:Create(ButtonFrame, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
						BackgroundColor3 = OrionLib.Themes[OrionLib.SelectedTheme].Third
					}):Play()
					TweenService:Create(ButtonFrame.UIStroke, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
						Transparency = 0.2
					}):Play()
				end)

				AddConnection(Click.MouseButton1Up, function()
					TweenService:Create(ButtonFrame, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
						Size = UDim2.new(1, 0, 0, 42)
					}):Play()
					spawn(function()
						ButtonConfig.Callback()
					end)
				end)

				AddConnection(Click.MouseButton1Down, function()
					TweenService:Create(ButtonFrame, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
						Size = UDim2.new(0.98, 0, 0, 40)
					}):Play()
				end)

				function Button:Set(ButtonText)
					ButtonFrame.Content.Text = ButtonText
				end	

				return Button
			end

			function ElementFunction:AddToggle(ToggleConfig)
				ToggleConfig = ToggleConfig or {}
				ToggleConfig.Name = ToggleConfig.Name or "Toggle"
				ToggleConfig.Default = ToggleConfig.Default or false
				ToggleConfig.Callback = ToggleConfig.Callback or function() end
				ToggleConfig.Color = ToggleConfig.Color or OrionLib.Themes[OrionLib.SelectedTheme].Accent
				ToggleConfig.Flag = ToggleConfig.Flag or nil
				ToggleConfig.Save = ToggleConfig.Save or false

				local Toggle = {Value = ToggleConfig.Default, Save = ToggleConfig.Save, Type = "Toggle"}

				local Click = SetProps(MakeElement("Button"), {
					Size = UDim2.new(1, 0, 1, 0)
				})

				local ToggleFrame = AddThemeObject(SetChildren(SetProps(MakeElement("RoundFrame", OrionLib.Themes[OrionLib.SelectedTheme].Third, 0.1, 8), {
					Size = UDim2.new(1, 0, 0, 42),
					Parent = ItemParent
				}), {
					MakeElement("Stroke", OrionLib.Themes[OrionLib.SelectedTheme].Stroke, 1, 0.2),
					SetChildren(SetProps(MakeElement("Frame", nil, 1), {
						Size = UDim2.new(1, 0, 1, 0)
					}), {
						AddThemeObject(SetProps(MakeElement("Label", ToggleConfig.Name, 15), {
							Size = UDim2.new(1, -70, 1, 0),
				end

				AddConnection(SliderFrame.SliderBar.InputBegan, function(Input)
					if Input.UserInputType == Enum.UserInputType.MouseButton1 then
						Dragging = true
						TweenService:Create(SliderFrame.SliderBar.SliderKnob, TweenInfo.new(0
return OrionLib
